<!doctype html>
<html>
  <head>
    <title>Volunteer Find</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/static/home.css">
  </head>
  <body>
    <h1>Volunteer Find</h1>
    <div id="projects">
      {% for project in projects %}
      <div class="project">
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>
      </div>
      {% endfor %}
    </div>
    <div id="panel">
      <button id="findButton">Find Projects</button>
      <button id="createButton">Create Project</button>
      <div id="search">
        <h2>Search for Volunteering Projects</h2>
        <form id="searchForm" action="/" method="GET">
          {% csrf_token %}
          <label for="minduration">Minimum duration</label>
          <input type="number" name="minduration" value="{{ minduration }}">
          <label for="minduration">Maximum duration</label>
          <input type="number" name="maxduration" value="{{ maxduration }}">
          <label for="maxdistance">Maximum distance</label>
          <input type="number" name="maxdistance" value="{{ maxdistance }}">
          <label for="latitude">Latitude</label>
          <input type="number" name="latitude" value="{{ latitude }}" step="any">
          <label for="longitude">Longitude</label>
          <input type="number" name="longitude" value="{{ longitude }}" step="any">
          <input type="submit" value="Search for projects">
        </form>
      </div>
      <div id="create">
        <h2>Create a new Project</h2>
        <form id="creationForm" action="/projects/create/" method="POST">
          {% csrf_token %}
          <label for="title">Title</label>
          <input type="text" name="title">
          <label for="description">Description</label>
          <textarea name="description"></textarea>
          <label for="latitude">Latitude</label>
          <input type="number" name="latitude">
          <label for="longitude">Longitude</label>
          <input type="number" name="longitude">
          <label for="type">Type of volunteering</label>
          <input type="text" name="type">
          <label for="duration">Duration</label>
          <input type="number" name="duration">
          <input type="submit" value="Create new project">
        </form>
      </div>
    </div>
    <script src="/static/search.js"></script>
    <script>
      if (window.location.search.substr(1) == "") {
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(function(position) {
            document.getElementsByName("latitude")[0].setAttribute("value", position.coords.latitude);
            document.getElementsByName("longitude")[0].setAttribute("value", position.coords.longitude);
          });
        }
      }
      document.getElementById("findButton").addEventListener("click", function() {
        document.getElementById("search").style.display = "block";
        document.getElementById("create").style.display = "none";
      });
      document.getElementById("createButton").addEventListener("click", function() {
        document.getElementById("search").style.display = "none";
        document.getElementById("create").style.display = "block";
      });
    </script>
  </body>
</html>
