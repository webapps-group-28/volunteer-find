<!doctype html>
<html>
  <head></head>
  <body>
    <h1>Create a new project</h1>
    <form id="creationForm" action="/projects/create/" method="POST">
      {% csrf_token %}
      <label for="title">Title</label>
      <input type="text" name="title">
      <label for="description">Description</label>
      <textarea name="description"></textarea>
      <label for="latitude">Latitude</label>
      <input type="number" name="latitude">
      <label for="longitude">Longitude</label>
      <input type="number" name="longitude">
      <label for="type">Type of volunteering</label>
      <input type="text" name="type">
      <label for="duration">Duration</label>
      <input type="number" name="duration">
      <input type="submit" value="Create new project">
    </form>
    <h1>Search for projects</h1>
    <form id="searchForm" action="/" method="GET">
      {% csrf_token %}
      <label for="minduration">Minimum duration</label>
      <input type="number" name="minduration" value="{{ minduration }}">
      <label for="minduration">Maximum duration</label>
      <input type="number" name="maxduration" value="{{ maxduration }}">
      <label for="maxdistance">Maximum distance</label>
      <input type="number" name="maxdistance" value="{{ maxdistance }}">
      <label for="latitude">Latitude</label>
      <input type="number" name="latitude" value="{{ latitude }}" step="any">
      <label for="longitude">Longitude</label>
      <input type="number" name="longitude" value="{{ longitude }}" step="any">
      <input type="submit" value="Search for projects">
    </form>
    {% for project in projects %}
    <h1><a href="{% url 'view_project' id=project.id %}">{{ project.title }}</a></h1>
    <p>{{ project.description }}</p>
    <p>{{ project.distance }}</p>
    {% endfor %}
    <script src="/static/search.js"></script>
    <script>
      if (window.location.search.substr(1) == "") {
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(function(position) {
            document.getElementsByName("latitude")[0].setAttribute("value", position.coords.latitude);
            document.getElementsByName("longitude")[0].setAttribute("value", position.coords.longitude);
          });
        }
      }
    </script>
  </body>
</html>
